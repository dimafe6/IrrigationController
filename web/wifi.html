<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Irrigation controller - WiFi settings</title>
    <script type="text/javascript">
        function WebSocketBegin() {
            if ("WebSocket" in window) {
                ws = new WebSocket("ws://" + location.hostname + "/ws");
                ws.onopen = function () {
                    document.getElementById("save").removeAttribute('disabled');
                    document.getElementById("ws-conn-fail").remove();
                };
            } else {
                alert("WebSocket NOT supported by your Browser!");
            }
        }

        function saveWifiConfig() {
            var command = {};
            command.command = "WiFiConfig";
            command.data = {};
            command.data.ssid = document.getElementById("ssid").value;
            command.data.pass = document.getElementById("pass").value;

            ws.send(JSON.stringify(command));
        }
    </script>
</head>

<body onLoad="javascript:WebSocketBegin()">
<h1 style="text-align: center">WiFi settings</h1>
<p id="ws-conn-fail" style="color: red; text-align: center">Connection to the WS server is not established! Please reload page and try again</p>
<div style="margin: auto;  width: 200px;">
    <div>
    <div>SSID</div>
    <input type="text" id="ssid">
</div>
<div>
    <div>Password</div>
    <input type="password" id="pass">
</div>
<div style="margin-top: 5px">
    <button onclick="saveWifiConfig()" id="save" disabled>Save</button>
</div>
</div>
</body>
</html>